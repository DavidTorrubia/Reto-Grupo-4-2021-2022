-- CREATE TABLES --
CREATE TABLE USUARIOS
(
ID_USUARIO INT PRIMARY KEY AUTO_INCREMENT,
CORREO VARCHAR(60) NOT NULL UNIQUE,
CONTRASENA VARCHAR(40) NOT NULL,
NOMBRE VARCHAR(45),
APELLIDOS VARCHAR(60),
ES_ADMIN INT NOT NULL,
IMAGENPERFIL VARCHAR(2048)
);

CREATE TABLE DIRECCIONES
(
ID_DIRECCION INT PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO INT,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO),
DIRECCION VARCHAR(70) NOT NULL
);

CREATE TABLE TIPOSMETODOPAGO
(
ID_TIPOMETPAGO INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE VARCHAR(40) NOT NULL
);

CREATE TABLE METODOSPAGO
(
ID_METPAGO INT PRIMARY KEY AUTO_INCREMENT,
ID_TIPOMETPAGO INT,
FOREIGN KEY (ID_TIPOMETPAGO) REFERENCES TIPOSMETODOPAGO (ID_TIPOMETPAGO),
ID_USUARIO INT,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO),
DETALLE VARCHAR(100) NOT NULL
);

CREATE TABLE TIENDAS
(
ID_TIENDA INT PRIMARY KEY AUTO_INCREMENT,
DIRECCION VARCHAR(70) NOT NULL,
MANAGER INT,
TLF VARCHAR(11)
);

CREATE TABLE EMPLEADOS 
(
ID_EMPLEADO INT PRIMARY KEY AUTO_INCREMENT,
ID_TIENDA INT,
FOREIGN KEY (ID_TIENDA) REFERENCES TIENDAS (ID_TIENDA),
NOMBRE VARCHAR(40),
APELLIDOS VARCHAR(60),
CORREO VARCHAR(60)
);

CREATE TABLE PEDIDOS
(
ID_PEDIDO INT PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO INT,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO),
ID_DIRECCION INT,
FOREIGN KEY (ID_DIRECCION) REFERENCES DIRECCIONES (ID_DIRECCION),
ID_TIENDA INT,
FOREIGN KEY (ID_TIENDA) REFERENCES TIENDAS (ID_TIENDA),
FECHA DATE NOT NULL
);

CREATE TABLE FACTURAS
(
ID_FACTURA INT PRIMARY KEY AUTO_INCREMENT,
ID_USUARIO INT,
FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS (ID_USUARIO),
ID_PEDIDO INT,
FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (ID_PEDIDO),
ID_METPAGO INT,
FOREIGN KEY (ID_METPAGO) REFERENCES METODOSPAGO (ID_METPAGO),
DETALLE VARCHAR(100),
PRECIOTOTAL INT NOT NULL
);

CREATE TABLE TIPOSPROD
(
ID_TIPOPROD INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE VARCHAR(40) NOT NULL
);

CREATE TABLE PRODUCTOS
(
ID_PRODUCTO INT PRIMARY KEY AUTO_INCREMENT,
ID_TIPOPROD INT,
FOREIGN KEY (ID_TIPOPROD) REFERENCES TIPOSPROD (ID_TIPOPROD),
NOMBRE VARCHAR(45) NOT NULL,
DETALLE VARCHAR(100),
PRECIO INT NOT NULL,
STOCK INT,
IMAGENPROD VARCHAR(2048)
);

CREATE TABLE CONTIENE
(
ID_PEDIDO INT,
FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS (ID_PEDIDO),
ID_PRODUCTO INT,
FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO),
CANTIDAD INT NOT NULL,
PRECIOUNITARIO INT NOT NULL
);

CREATE TABLE PROMOCIONES
(
ID_PROMOCION INT PRIMARY KEY AUTO_INCREMENT,
DESCUENTO INT NOT NULL,
NOMBRE VARCHAR(40) NOT NULL
);
CREATE TABLE CONTIENEPROM
(
ID_FACTURA INT,
FOREIGN KEY (ID_FACTURA) REFERENCES FACTURAS (ID_FACTURA),
ID_PROMOCION INT,
FOREIGN KEY (ID_PROMOCION) REFERENCES PROMOCIONES (ID_PROMOCION)
);


-- INSERCCION DE DATOS --
-- Inserccion Usuarios --
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,APELLIDOS,ES_ADMIN,IMAGENPERFIL)
VALUES(1,'admin@admin.com','admin','admin','admin',1," https://img.icons8.com/color/192/admin-settings-male.png ");
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,APELLIDOS,ES_ADMIN,IMAGENPERFIL)
VALUES(2,'david@ecoffe.com','david','David','Torrubia',1," https://img.icons8.com/color/192/circled-user-male-skin-type-4--v1.png ");
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,APELLIDOS,ES_ADMIN,IMAGENPERFIL)
VALUES(3,'oscar@ecoffe.com','oscar','Oscar','Ruiz',1," https://img.icons8.com/color/192/circled-user-male-skin-type-4--v1.png ");
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,APELLIDOS,ES_ADMIN,IMAGENPERFIL)
VALUES(4,'laura@ecoffe.com','laura','Laura','Gil',1," https://img.icons8.com/color/192/circled-user-female-skin-type-5--v2.png ");
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,ES_ADMIN,IMAGENPERFIL)
VALUES(5,'invitado','invitado','invitado',0," https://img.icons8.com/color/192/circled-user-male-skin-type-5--v1.png ");
INSERT INTO USUARIOS (ID_USUARIO,CORREO,CONTRASENA,NOMBRE,ES_ADMIN,IMAGENPERFIL)
VALUES(6,'prueba@prueba.com','1234','UsuarioPrueba',0," https://img.icons8.com/color/192/circled-user-male-skin-type-5--v1.png ");

-- Inserccion Direcciones --
INSERT INTO DIRECCIONES (ID_DIRECCION,ID_USUARIO,DIRECCION)
VALUES (9,1,'DEFECTO/DEFECTO/DEFECTO/DEFECTO/DEFECTO/DEFECTO');
INSERT INTO DIRECCIONES (ID_DIRECCION,ID_USUARIO,DIRECCION)
VALUES (1,6,'ESPAÑA/ZARAGOZA/CENTRO SAN VALERO/ / /50011');
INSERT INTO DIRECCIONES (ID_DIRECCION,ID_USUARIO,DIRECCION)
VALUES (2,6,'ESPAÑA/ZARAGOZA/Plaze Pilar/ / /50011');

-- Inserccion Tiendas --
INSERT INTO TIENDAS (ID_TIENDA,DIRECCION,TLF)
VALUES (1,'ESPAÑA/ARAGON/ZARAGOZA/ZARAGOZA/CALLE EJEMPLO','12345678');
INSERT INTO TIENDAS (ID_TIENDA,DIRECCION,TLF)
VALUES (2,'ESPAÑA/ARAGON/ZARAGOZA/UTEBO/CALLE EJEMPLO2','12345678');
INSERT INTO TIENDAS (ID_TIENDA,DIRECCION,TLF)
VALUES (3,'ESPAÑA/ARAGON/MADRID/MADRID/CALLE EJEMPLO3','12345678');

-- Inserccion Empleados --
INSERT INTO EMPLEADOS (ID_EMPLEADO,ID_TIENDA,NOMBRE)
VALUES (1,1,'EMPLEADOPRUEBA1');
INSERT INTO EMPLEADOS (ID_EMPLEADO,ID_TIENDA,NOMBRE)
VALUES (2,1,'EMPLEADOPRUEBA2');

-- Inserccion Tipos Productos --
INSERT INTO TIPOSPROD (ID_TIPOPROD,NOMBRE)
VALUES (1,'BEBIDAS');
INSERT INTO TIPOSPROD (ID_TIPOPROD,NOMBRE)
VALUES (2,'DULCE');
INSERT INTO TIPOSPROD (ID_TIPOPROD,NOMBRE)
VALUES (3,'SALADO');

-- Inserccion Tipos Metodos Pago --
INSERT INTO TIPOSMETODOPAGO (ID_TIPOMETPAGO,NOMBRE)
VALUES (1,'PAYPAL');
INSERT INTO TIPOSMETODOPAGO (ID_TIPOMETPAGO,NOMBRE)
VALUES (2,'TARJETA CREDITO');
INSERT INTO TIPOSMETODOPAGO (ID_TIPOMETPAGO,NOMBRE)
VALUES (3,'CUENTA BANCARIA');


-- Inserccion Productos con Imagenes --
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (1,1,'Coffee Espresso S','Colombian intense coffee served in a small cup',2,560," https://images.unsplash.com/photo-1510707577719-ae7c14805e3a?ixlib=rb-1.2.1&raw_url=true&q=80&fm=jpg&crop=entropy&cs=tinysrgb&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2067 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (2,1,'Coffee with milk S','Coffee with milk served in a small cup',3,200,"  https://images.unsplash.com/photo-1503481766315-7a586b20f66d?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1453 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (3,1,'Orange juice S','Orange juice from Valenciana oranges sugar free',4,100,"  https://images.unsplash.com/photo-1613478223719-2ab802602423?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (4,2,'Neapolitan Chocolate','Neapolitan Chocolate homemade',2,10,"  https://images.unsplash.com/photo-1597528662465-55ece5734101?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1074 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (5,2,'Cheesecake','Cheesecake with strawberry mermelade',4,30,"  https://images.unsplash.com/photo-1619985632461-f33748ef8f3e?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1075 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (6,2,'Croissant','French traditional croissant tradicional homemade',2,400,"  https://images.unsplash.com/photo-1596554928189-05ea9bfffe3f?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1073 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (7,3,'Jam sandwich','Jam and cheese sandwich',3,500,"  https://images.unsplash.com/photo-1528736235302-52922df5c122?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1254 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (8,3,'Bagel','Vegetal Bagel',5,400,"  https://images.unsplash.com/photo-1514460154823-73e3f57f72d2?ixlib=rb-1.2.1&raw_url=true&q=80&fm=jpg&crop=entropy&cs=tinysrgb&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470 ");
INSERT INTO PRODUCTOS (ID_PRODUCTO,ID_TIPOPROD,NOMBRE,DETALLE,PRECIO,STOCK, IMAGENPROD)
VALUES (9,3,'Mini croquettes','Mini croquettes with iberic jam and idiazabal cheese',4,300,"  https://cdn.pixabay.com/photo/2019/03/07/09/09/bread-4039758_960_720.jpg ");


-- Inserccion Metodos de pago
INSERT INTO METODOSPAGO (ID_METPAGO,ID_TIPOMETPAGO,ID_USUARIO,DETALLE)
VALUES (1,1,6,'prueba@prueba.com');
INSERT INTO METODOSPAGO (ID_METPAGO,ID_TIPOMETPAGO,ID_USUARIO,DETALLE)
VALUES (2,2,6,'1234567890123456/787/2022');
INSERT INTO METODOSPAGO (ID_METPAGO,ID_TIPOMETPAGO,ID_USUARIO,DETALLE)
VALUES (3,3,6,'EF304049838474');
